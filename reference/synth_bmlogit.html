<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Synthetic joint estimation with balancing constraint — synth_bmlogit • synthjoint</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Synthetic joint estimation with balancing constraint — synth_bmlogit"><meta property="og:description" content="Imputes cells with a balancing constraint, using Yamauchi's algorithm."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">synthjoint</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://github.com/kuriwaki/synthjoint/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Synthetic joint estimation with balancing constraint</h1>
    <small class="dont-index">Source: <a href="http://github.com/kuriwaki/synthjoint/blob/HEAD/R/synth_bmlogit.R" class="external-link"><code>R/synth_bmlogit.R</code></a></small>
    <div class="hidden name"><code>synth_bmlogit.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Imputes cells with a balancing constraint, using Yamauchi's algorithm.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">synth_bmlogit</span><span class="op">(</span>
  <span class="va">formula</span>,
  <span class="va">microdata</span>,
  <span class="va">poptable</span>,
  <span class="va">fix_to</span>,
  fix_by_area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">area_var</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">fix_to</span><span class="op">)</span><span class="op">)</span>,
  <span class="va">area_var</span>,
  count_var <span class="op">=</span> <span class="st">"count"</span>,
  tol <span class="op">=</span> <span class="fl">0.05</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="source">
    <h2>Source</h2>
    <p>Soichiro Yamauchi and Shiro Kuriwaki (2021). bmlogit: Multinomial logit with
balancing constraints. R package version 0.0.3.</p>
    </div>
    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>formula</dt>
<dd><p>A representation of the aggregate imputation or "outcome" model,
of the form <code>X_{K} ~ X_1 + ... X_{K - 1}</code></p></dd>
<dt>microdata</dt>
<dd><p>The survey table that the multinomial model will be built off.
Must contain all variables in the LHS and RHS of <code>formula</code>.</p></dd>
<dt>poptable</dt>
<dd><p>The population table, collapsed in terms of counts. Must contain
all variables in the RHS of <code>formula</code>, as well as the variables specified in
<code>area_var</code> and <code>count_var</code> below.</p></dd>
<dt>fix_to</dt>
<dd><p>A dataset with only marginal counts or proportions of the outcome
in question, by each area. Proportions will be corrected so that the margins
of the synthetic joint will match these, with a simple ratio.</p></dd>
<dt>fix_by_area</dt>
<dd><p>logical, whether to fix to targets area by area. Defaults to
TRUE if <code>area_var</code> is a variable in <code>fix_to</code>. If <code>FALSE</code>, collapses the
input to a single target.</p></dd>
<dt>area_var</dt>
<dd><p>A character vector of the area of interest.</p></dd>
<dt>count_var</dt>
<dd><p>A character variable that specifies which variable in <code>poptable</code>
indicates the count</p></dd>
<dt>tol</dt>
<dd><p>Tolerance for balance</p></dd>
</dl></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="synth_mlogit.html">synth_mlogit()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.github.com/kuriwaki/ccesMRPprep" class="external-link">ccesMRPprep</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># can take a few minutes if fix_by_area = TRUE (the default)</span></span>
<span class="r-in"><span class="va">educ_target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">acs_educ_NY</span>, <span class="va">cd</span>, <span class="va">educ</span>, wt <span class="op">=</span> <span class="va">count</span>, name <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">educ_target</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 108 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    cd    educ          count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> NY-01 HS or Less   <span style="text-decoration: underline;">202</span>298</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> NY-01 Some College <span style="text-decoration: underline;">169</span>556</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> NY-01 4-Year       <span style="text-decoration: underline;">111</span>561</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> NY-01 Post-Grad     <span style="text-decoration: underline;">83</span>255</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> NY-02 HS or Less   <span style="text-decoration: underline;">231</span>614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> NY-02 Some College <span style="text-decoration: underline;">157</span>090</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> NY-02 4-Year        <span style="text-decoration: underline;">99</span>763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> NY-02 Post-Grad     <span style="text-decoration: underline;">71</span>094</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> NY-03 HS or Less   <span style="text-decoration: underline;">138</span>929</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> NY-03 Some College <span style="text-decoration: underline;">127</span>003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 98 more rows</span></span>
<span class="r-in"><span class="va">acs_race_NY</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4,320 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year cd    female race  age               count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">2</span>018 NY-01      0 Black 18 to 24 years      826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">2</span>018 NY-01      0 Black 18 to 24 years     <span style="text-decoration: underline;">1</span>828</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">2</span>018 NY-01      0 Black 25 to 34 years     <span style="text-decoration: underline;">1</span>127</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">2</span>018 NY-01      0 Black 25 to 34 years     <span style="text-decoration: underline;">1</span>298</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">2</span>018 NY-01      0 Black 35 to 44 years     <span style="text-decoration: underline;">2</span>696</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">2</span>018 NY-01      0 Black 45 to 64 years     <span style="text-decoration: underline;">3</span>779</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">2</span>018 NY-01      0 Black 45 to 64 years     <span style="text-decoration: underline;">2</span>153</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">2</span>018 NY-01      0 Black 65 years and over   781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">2</span>018 NY-01      0 Black 65 years and over   624</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>018 NY-01      0 Black 65 years and over   133</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 4,310 more rows</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">pop_syn</span> <span class="op">&lt;-</span> <span class="fu">synth_bmlogit</span><span class="op">(</span><span class="va">educ</span> <span class="op">~</span> <span class="va">race</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span>,</span>
<span class="r-in">                         microdata <span class="op">=</span> <span class="va">cc18_NY</span>,</span>
<span class="r-in">                         fix_to <span class="op">=</span> <span class="va">educ_target</span>,</span>
<span class="r-in">                         poptable <span class="op">=</span> <span class="va">acs_race_NY</span>,</span>
<span class="r-in">                         area_var <span class="op">=</span> <span class="st">"cd"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">pop_syn</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6,480 × 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    cd    race  age            female    prX educ       prZ_givenX    prXZ  count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> NY-01 White 18 to 24 years      0 0.035<span style="text-decoration: underline;">8</span> HS or Less     0.293  1.05<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span>  <span style="text-decoration: underline;">6</span>047.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> NY-01 White 18 to 24 years      0 0.035<span style="text-decoration: underline;">8</span> Some Coll…     0.490  1.75<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span> <span style="text-decoration: underline;">10</span>100.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> NY-01 White 18 to 24 years      0 0.035<span style="text-decoration: underline;">8</span> 4-Year         0.188  6.72<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span>  <span style="text-decoration: underline;">3</span>871.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> NY-01 White 18 to 24 years      0 0.035<span style="text-decoration: underline;">8</span> Post-Grad      0.028<span style="text-decoration: underline;">4</span> 1.02<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span>   586.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> NY-01 White 18 to 24 years      1 0.035<span style="text-decoration: underline;">5</span> HS or Less     0.385  1.37<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span>  <span style="text-decoration: underline;">7</span>877.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> NY-01 White 18 to 24 years      1 0.035<span style="text-decoration: underline;">5</span> Some Coll…     0.449  1.60<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span>  <span style="text-decoration: underline;">9</span>197.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> NY-01 White 18 to 24 years      1 0.035<span style="text-decoration: underline;">5</span> 4-Year         0.146  5.18<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span>  <span style="text-decoration: underline;">2</span>987.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> NY-01 White 18 to 24 years      1 0.035<span style="text-decoration: underline;">5</span> Post-Grad      0.020<span style="text-decoration: underline;">5</span> 7.28<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span>   420.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> NY-01 White 25 to 34 years      0 0.047<span style="text-decoration: underline;">6</span> HS or Less     0.184  8.77<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span>  <span style="text-decoration: underline;">5</span>052.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> NY-01 White 25 to 34 years      0 0.047<span style="text-decoration: underline;">6</span> Some Coll…     0.191  9.07<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span>  <span style="text-decoration: underline;">5</span>228.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 6,470 more rows</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Soichiro Yamauchi, Shiro Kuriwaki.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

